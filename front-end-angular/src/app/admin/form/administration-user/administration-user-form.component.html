<div class="p-4">
    <form class="flex flex-col gap-6 p-2" [formGroup]="administrationUserForm" (ngSubmit)="handleSubmit()">

        <div class="flex flex-col gap-2 p-2 max-h-[65vh] overflow-x-auto">
            <label class="uppercase font-bold text-[#283943]"> Nombre </label>
            <input type="text" placeholder="Name *" class="p-2 rounded border-b-[0.2rem] border-[#0061A0] focus:outline-none focus:ring-0 focus:border-b-[0.2rem] focus:border-[#0061A0]" formControlName="name"
                [ngClass]="{'border-red-500': administrationUserForm.get('name')?.invalid && administrationUserForm.get('name')?.touched}" />
            <span *ngIf="administrationUserForm.get('name')?.invalid && administrationUserForm.get('name')?.touched"
                class="text-red-500">
                name social es obligatorio.
            </span>

            <label class="uppercase font-bold text-[#283943]"> Email </label>
            <input type="email" placeholder="Email *" class="p-2 rounded border-b-[0.2rem] border-[#0061A0] focus:outline-none focus:ring-0 focus:border-b-[0.2rem] focus:border-[#0061A0]" formControlName="email"
                [ngClass]="{'border-red-500': administrationUserForm.get('email')?.invalid && administrationUserForm.get('email')?.touched}" />
            <span *ngIf="administrationUserForm.get('email')?.invalid && administrationUserForm.get('email')?.touched"
                class="text-red-500">
                email es obligatorio.
            </span>

            <label class="uppercase font-bold text-[#283943]"> Password </label>
            <input type="text" placeholder="New Password *" class="p-2 rounded border-b-[0.2rem] border-[#0061A0] focus:outline-none focus:ring-0 focus:border-b-[0.2rem] focus:border-[#0061A0]"
                formControlName="password"
                [ngClass]="{'border-red-500': administrationUserForm.get('password')?.invalid && administrationUserForm.get('password')?.touched}" />
            <span
                *ngIf="administrationUserForm.get('password')?.invalid && administrationUserForm.get('password')?.touched"
                class="text-red-500">
                Password es obligatorio.
            </span>

            <div *ngIf="isAdmin" class="w-full">
                <label class="uppercase font-bold text-[#283943]"> Empresa </label>
                <select class="p-2 rounded border-b-[0.2rem] border-[#0061A0] focus:outline-none focus:ring-0 focus:border-b-[0.2rem] focus:border-[#0061A0] w-full" formControlName="company_id"
                    [ngClass]="{'border-red-500': administrationUserForm.get('company_id')?.invalid && administrationUserForm.get('company_id')?.touched}">
                    <option *ngFor="let company of companyOptions" [value]="company.id">
                        {{ company.ra_social }}
                    </option>
                </select>
                <span
                    *ngIf="administrationUserForm.get('company_id')?.invalid && administrationUserForm.get('company_id')?.touched"
                    class="text-red-500">
                    La empresa es obligatoria.
                </span>
            </div>

            <label class="uppercase font-bold text-[#283943]"> Estado </label>
            <select class="p-2 rounded border-b-[0.2rem] border-[#0061A0] focus:outline-none focus:ring-0 focus:border-b-[0.2rem] focus:border-[#0061A0]" formControlName="status"
                [ngClass]="{'border-red-500': administrationUserForm.get('status')?.invalid && administrationUserForm.get('status')?.touched}">
                <option *ngFor="let option of statusOptions" [value]="option.id">{{ option.nombre }}</option>
            </select>
            <span *ngIf="administrationUserForm.get('status')?.invalid && administrationUserForm.get('status')?.touched"
                class="text-red-500">
                El estado es obligatorio.
            </span>

            <label class="uppercase font-bold text-[#283943]"> ROL </label>
            <select class="p-2 rounded border-b-[0.2rem] border-[#0061A0] focus:outline-none focus:ring-0 focus:border-b-[0.2rem] focus:border-[#0061A0]" formControlName="role"
                [ngClass]="{'border-red-500': administrationUserForm.get('role')?.invalid && administrationUserForm.get('role')?.touched}">

                <option *ngFor="let option of roleOptions" [value]="option.name">
                    {{ option.name }}
                </option>
            </select>
            <span *ngIf="administrationUserForm.get('role')?.invalid && administrationUserForm.get('role')?.touched"
                class="text-red-500">
                El role es obligatorio.
            </span>

        </div>

        <div class="flex w-12/12 px-2 justify-between">
            <button class="bg-[#0061A0] w-5/12 py-2 rounded text-white" type="submit"
                [disabled]="!administrationUserForm.valid"
                [ngClass]="{'opacity-50 cursor-not-allowed': !administrationUserForm.valid}">
                {{ administrationUser ? 'Actualizar' : 'Crear' }}
            </button>
            <button class="w-5/12 py-2 border border-gray-300 rounded" (click)="onClose.emit()"
                type="button">Cancelar</button>
        </div>
    </form>
</div>